# 20250802

## 📈 迭代效果对比

| 指标 | Baseline | 本次迭代 | 提升 |
|------|----------|----------|------|
| **Public Score** | 0.77511 | 0.77990 | +0.00479 (+0.62%) |
| **特征数量** | 4个 | 8个 | +100% |
| **使用特征** | Pclass, Sex, SibSp, Parch | TitleGroup, Pclass, HasCabin, AgeGroup, FamilyType, Deck, Age_filled, IsAlone | 智能特征工程 |
| **预处理策略** | 仅Sex独热编码 | 完整特征工程pipeline | 系统化预处理 |
| **缺失值处理** | 默认填充/删除 | 智能填充策略 | 基于Title+Pclass |
| **特征质量** | 原始特征 | 工程化特征 | 数据驱动设计 |

### 核心改进点
- ✅ **Title特征**: 比Sex更精细的预测信息，Mrs生存率79.4%
- ✅ **智能Age填充**: 基于TitleGroup+Pclass组合，消除19.9%缺失值
- ✅ **甲板位置特征**: Deck特征捕获船舶位置对逃生的影响
- ✅ **家庭结构优化**: 小家庭(2-4人)生存率57.9%，独自旅行仅30.4%
- ✅ **舱位信息价值**: HasCabin特征显示信息完整性与地位的关联

## 📊 数据探索

### 数据集概览

| 数据集 | 样本数 | 特征数 | 目标变量 |
|--------|--------|--------|----------|
| 训练集 | 891 | 12 | Survived (生存率38.4%) |
| 测试集 | 418 | 11 | - |

### 分布分析
| 维度 | 分类 | 生存率 | 关键发现 |
|------|------|--------|----------|
| **性别** | 女性 | 74.2% | 最强预测因子，女性是男性3.9倍 |
| | 男性 | 18.9% | "妇女儿童优先"原则体现明显 |
| **船票等级** | 1等舱 | 63.0% | 社会地位影响显著 |
| | 2等舱 | 47.3% | 等级差异达38.7个百分点 |
| | 3等舱 | 24.2% | |
| **年龄组** | 儿童 | 57.4% | 儿童受保护群体 |
| | 青年 | 36.9% | |
| | 中年 | 42.1% | |
| | 老年 | 34.4% | |
| **家庭规模** | 4人家庭 | 72.4% | 小家庭生存率最优 |
| | 独自旅行 | 30.4% | 极端规模生存率低 |
| | 8人家庭 | 0.0% | |

### 质量分析
| 字段 | 缺失数量 | 缺失率 | 处理策略 |
|------|----------|--------|----------|
| Age | 177 | 19.9% | 基于Title+Pclass智能填充 |
| Cabin | 687 | 77.1% | 提取甲板层+创建HasCabin特征 |
| Embarked | 2 | 0.2% | 众数填充 |

## 数据预处理

### 缺失值处理
| 字段 | 处理策略 | 实现方法 | 效果 |
|------|----------|----------|------|
| **Age** | 智能填充 | 基于TitleGroup+Pclass组合的中位数填充 | 177个缺失→0个 |
| **Embarked** | 众数填充 | 使用最频繁的登船港口'S'填充 | 2个缺失→0个 |
| **Cabin** | 特征提取 | 提取甲板层信息+创建HasCabin布尔特征 | 转化为有价值特征 |

### 分类变量编码
| 特征类型 | 编码方式 | 应用特征 | 原因 |
|----------|----------|----------|------|
| **有序分类** | LabelEncoder | Pclass, AgeGroup | 保持大小关系 |
| **无序分类** | OneHotEncoder | TitleGroup, Deck, FamilyType | 避免虚假顺序关系 |
| **布尔特征** | 直接使用 | HasCabin, IsAlone | 已是0/1格式 |

### 数值特征处理
- **Age_filled**: 智能填充后的连续年龄变量
- **FarePerClass**: 标准化的等级内相对票价
- **FamilySize**: SibSp + Parch + 1组合特征


## 特征构造

### 新特征
| 特征名 | 来源 | 类型 | 预测价值 | 说明 |
|--------|------|------|----------|------|
| **TitleGroup** | Name | 分类(6类) | ⭐⭐⭐⭐⭐ | Mrs生存率79.4%，比Sex更精细 |
| **Age_filled** | Age | 数值 | ⭐⭐⭐ | 智能填充消除缺失值 |
| **AgeGroup** | Age_filled | 分类(4类) | ⭐⭐⭐ | Child/Young/Middle/Senior |
| **Deck** | Cabin | 分类(9类) | ⭐⭐⭐ | 甲板D层生存率75.8% |
| **HasCabin** | Cabin | 布尔 | ⭐⭐⭐⭐ | 有信息66.7% vs 无信息30.0% |
| **FamilyType** | SibSp+Parch | 分类(3类) | ⭐⭐⭐ | Small家庭生存率57.9% |
| **IsAlone** | FamilySize | 布尔 | ⭐⭐ | 独自旅行标识 |
| **FarePerClass** | Fare/Pclass | 数值 | ⭐⭐ | 等级内相对票价 |
| **FareGroup** | Fare | 分类(3类) | ⭐⭐ | 各等级内High/Mid/Low |

### 特征重要性
| 排名 | 特征 | 预测能力得分 | 说明 |
|------|------|-------------|------|
| 1 | TitleGroup | 0.268 | 比Sex提供更细粒度信息 |
| 2 | Sex | 0.252 | 传统最强特征 |
| 3 | Pclass | 0.156 | 社会地位指标 |
| 4 | HasCabin | 0.130 | 信息完整性反映地位 |
| 5 | FamilyType | 0.128 | 家庭结构影响策略 |

### 特征组合
| 优先级 | 特征列表 | 使用原因 |
|--------|----------|----------|
| **核心** | TitleGroup, Pclass, HasCabin | 预测能力最强，必选 |
| **重要** | AgeGroup, FamilyType, Deck | 补充维度信息 |
| **辅助** | FarePerClass, IsAlone | 精细化区分 |
| **废弃** | Name, Cabin, Ticket | 原始文本，已提取价值 |

### 数据质量提升效果

| 指标 | 处理前 | 处理后 | 改善幅度 |
|------|--------|--------|----------|
| 总缺失值 | 866个 | 864个 | -2个 |
| 特征数量 | 12个 | 24个 | +100% |
| 模型准确率 | 82.27% | 85.96% | +3.69% |
| 特征质量 | 基础 | 显著提升 | - |

## 🚀 下一步

0. **编码策略**: LabelEncoder用于有序特征，OneHot用于无序特征
1. **模型尝试**: 树模型(RandomForest/XGBoost)更适合分类特征；RandomForest → XGBoost → LightGBM
2. **超参调优**: 网格搜索或贝叶斯优化  
3. **特征选择**: 考虑TitleGroup×Pclass交叉特征；RFE或LASSO筛选
4. **模型融合**: 多模型集成提升稳定性
5. **交叉验证**: 5-fold验证确保泛化性

---
